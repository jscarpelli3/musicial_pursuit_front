{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nconst API_KEY = process.env.VUE_APP_AUDIODB_KEY;\nimport Question from './Question.vue';\nimport Client from '../services/api';\nexport default {\n  name: 'GameMain',\n  components: {\n    Question\n  },\n  props: {\n    user: Object\n  },\n  data: () => ({\n    searchQuery: \"\",\n    artist_image_src: \"\",\n    artist_start_yr: \"\",\n    searchResults: {},\n    searched: false,\n    round: 0,\n    ses_score: 0,\n    level_up: 0\n  }),\n  mounted() {},\n  methods: {\n    async getAlbums(e) {\n      e.preventDefault();\n      const res = await axios.get(`https://theaudiodb.com/api/v1/json/${API_KEY}/searchalbum.php?s=${this.searchQuery}`);\n      // console.log(res.data)\n      this.searchResults = res.data;\n      this.searched = true;\n      this.makeImagePath();\n    },\n    handleChange(event) {\n      this.searchQuery = event.target.value;\n    },\n    async makeImagePath() {\n      const res = await axios.get(`https://theaudiodb.com/api/v1/json/${API_KEY}/search.php?s=${this.searchQuery}`);\n      this.artist_start_yr = res.data.artists[0].intFormedYear;\n      this.artist_image_src = res.data.artists[0].strArtistLogo;\n    },\n    start_round() {\n      if (this.round < 3) {\n        this.round++;\n      } else {\n        this.round = 50;\n      }\n    },\n    correct(points, lvl) {\n      this.ses_score += points;\n      this.level_up += lvl;\n      this.start_round();\n    },\n    incorrect(points) {\n      this.ses_score -= points;\n      this.round = 100;\n    },\n    async submit_scores(e) {\n      e.preventDefault();\n      const newTotal = this.user.total_score + this.ses_score;\n      const newLvl = this.user.current_level + this.level_up;\n      let newAllTime = this.user.alltime_level;\n      let newSesScore = this.user.high_ses_score;\n      if (this.user.alltime_level < newLvl) {\n        newAllTime = newLvl;\n      }\n      if (this.user.high_ses_score < this.ses.score) {\n        newSesScore = newTotal;\n      }\n      const newStats = {\n        current_level: newLvl,\n        total_score: newTotal,\n        alltime_lvl: newAllTime,\n        high_ses_score: newSesScore\n      };\n      await Client.put(`/user/${this.user.id}`, newStats).then(res => {\n        this.$router.push(`/dashboard`);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","API_KEY","process","env","VUE_APP_AUDIODB_KEY","Question","Client","name","components","props","user","Object","data","searchQuery","artist_image_src","artist_start_yr","searchResults","searched","round","ses_score","level_up","mounted","methods","getAlbums","e","preventDefault","res","get","makeImagePath","handleChange","event","target","value","artists","intFormedYear","strArtistLogo","start_round","correct","points","lvl","incorrect","submit_scores","newTotal","total_score","newLvl","current_level","newAllTime","alltime_level","newSesScore","high_ses_score","ses","score","newStats","alltime_lvl","put","id","then","$router","push","catch","error","console","log"],"sourceRoot":"","sources":["/Users/jscarpelli/ga_seir919/projects/musical_pursuit/musicial_pursuit_front/musical_pursuit/src/components/GameComponents/GameMain.vue"],"sourcesContent":["<template>\n  <div>\n    <div v-if=\"round === 0\" class=\"game-details\">\n      <h1 class=\"headline\">Get your rock brain ready!</h1>\n      <p class=\"game-ex\">RockDog Trivia works in rounds of 3 quetsions.<br />Search an rock or pop artist you think you\n        know, then answer 3 questions about their discography. Each question gets you points. If you answer all 3\n        correct you will increase your level. </p>\n    </div>\n    <div v-if=\"!searched\" class=\"search\">\n      <form @submit=\"getAlbums\">\n        <input placeholder=\"Search Term\" @change=\"handleChange\" :value=\"searchQuery\" name=\"search\" type=\"text\" />\n        <button>Search</button>\n      </form>\n    </div>\n    <div v-else class=\"cur-artist\">\n      <h2 v-if=\"round === 0\">Get ready to answer questions about {{ searchResults.album[0].strArtist }}!</h2>\n      <img class=\"artist-logo\" :src=\"artist_image_src\" /><br />\n      <button v-if=\"round === 0\" class=\"go-btn\" @click=\"start_round\">GO!</button>\n    </div>\n    <div v-if=\"round === 1\" class=\"round-one-q\">\n      <Question :user=\"user\" :artistAlbumInfo=\"searchResults\" @correct=\"correct\" @incorrect=\"incorrect\"\n        :roundNum=\"round\" :artistStartYr=\"artist_start_yr\" />\n    </div>\n    <div v-if=\"round === 2\" class=\"round-two-q\">\n      <Question :user=\"user\" :artistAlbumInfo=\"searchResults\" @correct=\"correct\" @incorrect=\"incorrect\"\n        :roundNum=\"round\" :artistStartYr=\"artist_start_yr\" />\n    </div>\n    <div v-if=\"round === 3\" class=\"round-three-q\">\n      <Question :user=\"user\" :artistAlbumInfo=\"searchResults\" @correct=\"correct\" @incorrect=\"incorrect\"\n        :roundNum=\"round\" :artistStartYr=\"artist_start_yr\" />\n    </div>\n    <div v-if=\"round === 50\" class=\"round-three-q\">\n      <h1>Sorry, wrong answer!</h1>\n      <h3>You Lose 50 points!</h3>\n      <button @click=\"this.$router.push(`/dashboard`)\">Back To You Dashboard</button>\n    </div>\n    <div v-if=\"round === 100\" class=\"round-three-q\">\n      <h1>Sorry, wrong answer!</h1>\n      <h3>You Lose 50 points!</h3>\n      <button @click=\"this.$router.push(`/dashboard`)\">Back To You Dashboard</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nconst API_KEY = process.env.VUE_APP_AUDIODB_KEY\nimport Question from './Question.vue'\nimport Client from '../services/api'\n\nexport default {\n  name: 'GameMain',\n  components: { Question },\n  props: {\n    user: Object\n  },\n  data: () => ({\n    searchQuery: \"\",\n    artist_image_src: \"\",\n    artist_start_yr: \"\",\n    searchResults: {},\n    searched: false,\n    round: 0,\n    ses_score: 0,\n    level_up: 0\n  }),\n  mounted() { },\n  methods: {\n    async getAlbums(e) {\n      e.preventDefault();\n      const res = await axios.get(`https://theaudiodb.com/api/v1/json/${API_KEY}/searchalbum.php?s=${this.searchQuery}`);\n      // console.log(res.data)\n      this.searchResults = res.data;\n      this.searched = true\n      this.makeImagePath()\n    },\n    handleChange(event) {\n      this.searchQuery = event.target.value\n    },\n    async makeImagePath() {\n      const res = await axios.get(`https://theaudiodb.com/api/v1/json/${API_KEY}/search.php?s=${this.searchQuery}`);\n      this.artist_start_yr = res.data.artists[0].intFormedYear\n      this.artist_image_src = res.data.artists[0].strArtistLogo\n    },\n    start_round() {\n      if (this.round < 3) {\n        this.round++\n      } else {\n        this.round = 50\n\n      }\n    },\n    correct(points, lvl) {\n      this.ses_score += points\n      this.level_up += lvl\n      this.start_round()\n    },\n    incorrect(points) {\n      this.ses_score -= points\n      this.round = 100\n    },\n    async submit_scores(e) {\n      e.preventDefault();\n      const newTotal = this.user.total_score + this.ses_score\n      const newLvl = this.user.current_level + this.level_up\n      let newAllTime = this.user.alltime_level\n      let newSesScore = this.user.high_ses_score\n      if (this.user.alltime_level < newLvl) {\n        newAllTime = newLvl\n      }\n      if (this.user.high_ses_score < this.ses.score) {\n        newSesScore = newTotal\n      }\n      const newStats = { current_level: newLvl, total_score: newTotal, alltime_lvl: newAllTime, high_ses_score: newSesScore }\n      await Client.put(`/user/${this.user.id}`, newStats)\n        .then((res) => {\n          this.$router.push(`/dashboard`)\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n    }\n\n  }\n}\n\n</script>\n\n<style>\n.game-details {\n  margin: 2vh 4vw;\n  box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.347);\n  border-radius: 10px;\n  background-color: rgba(240, 255, 255, 0.195);\n  padding: 2vw;\n}\n\n.go-btn {\n  width: 60vw;\n  height: 6vh;\n  background-color: rgb(244, 118, 28);\n  text-shadow: 2px 1px 3px;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  margin: 0;\n}\n\n.artist-logo {\n  width: 90vw;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}